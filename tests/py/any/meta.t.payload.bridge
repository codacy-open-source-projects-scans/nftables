# meta mark set vlan id map { 1 : 0x00000001, 4095 : 0x00004095 }
__map%d test-bridge b size 2
__map%d test-bridge 0
	element 0001 : 00000001	element 0fff : 00004095
bridge test-bridge input
  [ payload load 2b @ link header + 12 => reg 1 ]
  [ cmp eq reg 1 0x8100 ]
  [ payload load 2b @ link header + 14 => reg 1 ]
  [ bitwise reg 1 = ( reg 1 & 0x0fff ) ^ 0x0000 ]
  [ lookup reg 1 set __map%d dreg 1 ]
  [ meta set mark with reg 1 ]

# meta mark set vlan id map @map1
bridge test-bridge input
  [ payload load 2b @ link header + 12 => reg 1 ]
  [ cmp eq reg 1 0x8100 ]
  [ payload load 2b @ link header + 14 => reg 1 ]
  [ bitwise reg 1 = ( reg 1 & 0x0fff ) ^ 0x0000 ]
  [ lookup reg 1 set map1 dreg 1 ]
  [ meta set mark with reg 1 ]
